# Bewise Тестовая задача #1

## Текст задачи
1) С помощью Docker (предпочтительно - docker-compose) развернуть образ с любой опенсорсной СУБД (предпочтительно - PostgreSQL). Предоставить все необходимые скрипты и конфигурационные (docker/compose) файлы для развертывания СУБД, а также инструкции для подключения к ней. Необходимо обеспечить сохранность данных при рестарте контейнера (то есть - использовать volume-ы для хранения файлов СУБД на хост-машине.
2) Реализовать на Python3 веб сервис (с помощью FastAPI или Flask, например), выполняющий следующие функции:
   - В сервисе должно быть реализован POST REST метод, принимающий на вход запросы с содержимым вида {"questions_num": integer}.
   - После получения запроса сервис, в свою очередь, запрашивает с публичного API (англоязычные вопросы для викторин) https://jservice.io/api/random?count=1 указанное в полученном запросе количество вопросов.
   - Далее, полученные ответы должны сохраняться в базе данных из п. 1, причем сохранена должна быть как минимум следующая информация (название колонок и типы данный можете выбрать сами, также можете добавлять свои колонки): 1. ID вопроса, 2. Текст вопроса, 3. Текст ответа, 4. - Дата создания вопроса. В случае, если в БД имеется такой же вопрос, к публичному API с викторинами должны выполняться дополнительные запросы до тех пор, пока не будет получен уникальный вопрос для викторины.
   - Ответом на запрос из п.2.a должен быть предыдущей сохранённый вопрос для викторины. В случае его отсутствия - пустой объект.
3) В репозитории с заданием должны быть предоставлены инструкции по сборке докер-образа с сервисом из п. 2., его настройке и запуску. А также пример запроса к POST API сервиса.
4) Желательно, если при выполнении задания вы будете использовать docker-compose, SQLAalchemy,  пользоваться аннотацией типов.


## Порядок запуска проекта для разработки/тестирования
1) Скачать и установить Python для вашей системы.
<br> https://www.python.org
2) Скачать, установить и включить Docker для вашей системы.
<br> https://www.docker.com
3) Открыть папку с проектом в терминале.
4) Переименовать файл .env.sample в .env:
```sh
mv ./.env.sample ./.env
```
5) Запустить docker-compose:
```sh
docker compose up -d
```
6) Сервер будет доступен по адресу
<br> http://localhost:5000/api/quiz


## Пример POST-запроса
Запросы можно посылать, например, с помощью Postman, указывая в теле запроса содержимое вида ```{"questions_num": integer}```.
#### Запрос:
```text
POST /api/quiz HTTP/1.1
Host: localhost:5000
Content-Type: application/json
Content-Length: 28

{
    "questions_num": 5
}
```
#### Ответ:
```text
{
  "id": 5,
  "question": "In 1881 this man's International Allied Shows joined with P.T. to promote "The Greatest Show on Earth""
  "answer": "Bailey",
  "created": "Wed, 24 May 2023 13:34:03 GMT",
}
```